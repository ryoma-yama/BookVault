# 蔵書管理アプリ 各ルートの責務定義（Remix + Cloudflare Pages）

## `/books` 書籍一覧
- 書籍の検索（タイトル／著者／出版社／タグ）
- 結果の一覧表示
- 書籍詳細ページへのリンク
- クエリパラメータでの検索（`?q=...&tag=...`）
- 出力内容：書籍＋著者＋タグの情報をJOINして表示
- 認証不要

## `/books/:bookId` 書籍詳細
- 書籍の詳細表示（著者・出版社・説明）
- レビュー一覧
- 貸出状況（現在の貸出有無、返却済か）
- ログインユーザー：レビュー投稿、貸出／予約ボタンの表示
- 出力内容：書籍情報 + 所蔵状況 + 自身の予約状態 + レビュー一覧
- book_copiesを集約的に表示（例：3冊中2冊貸出中）

## `/books/new` 書籍登録（管理者専用）
- Google Books APIによるISBN補完／検索
- 著者・タグの新規追加 or 既存選択
- 入力項目：ISBN、タイトル、著者、出版社、出版年、タグなど
- バリデーション結果を表示
- 認証：管理者のみ

## `/books/:bookId/edit` 書籍編集（管理者専用）
- 書籍情報の編集（著者／タグ含む）
- newとフォーム構造を再利用可能に
- 認証：管理者のみ

## `/copies` 蔵書（物理本）管理（管理者専用）
- book_copiesの一覧表示
- 新規登録、論理削除（discarded）
- 各本の現在の貸出状況の確認

## `/loans` 自分の貸出履歴
- ログインユーザーが過去〜現在に借りた本の一覧
- 返却済／貸出中フィルタ（オプション）

## `/reservations` 予約一覧
- 自分が現在予約中の書籍一覧
- 予約キャンセル（未返却本に対してのみ）

## `/me` プロフィール
- 表示名（display_name）の変更

## `/admin` 管理ダッシュボード
- 延滞貸出の一覧表示（期限超過・未返却）
- 人気の書籍（貸出回数ベース）
- 所蔵／利用履歴の統計表示

